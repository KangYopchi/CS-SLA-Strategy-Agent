# CS SLA ë‹¬ì„± ì „ëµ ì¶”ì²œ Agent (MVP)

## 1. ë°°ê²½ ë° ëª©ì  (Background & Objectives)
*   **Problem (ë¬¸ì œì ):**
    *   CS ì„¼í„°ëŠ” ì¼ì¼ SLA ë‹¬ì„±ì´ í•µì‹¬ ê³¼ì—…ì´ë‚˜, ìš´ì˜ ê´€ë¦¬ì(SV)ì˜ ê°œì¸ ì—­ëŸ‰ ì°¨ì´ë¡œ ì¸í•´ ì „ëµ ìˆ˜ë¦½ì˜ ì§ˆì  í¸ì°¨ê°€ ë°œìƒí•¨.
    *   Raw Data ì–‘ì‹ì´ ê³ ê°ì‚¬ë³„ë¡œ ìƒì´í•˜ê³  API ì—°ë™ì´ ì–´ë ¤ì›Œ ë°ì´í„° ì·¨í•© ë° ë¶„ì„ì— ê³¼ë„í•œ ë¦¬ì†ŒìŠ¤ ì†Œìš”.
*   **Goal (ëª©í‘œ):**
    *   ë°ì´í„° ê²€ì¦ë¶€í„° ì „ëµ ì œì•ˆê¹Œì§€ ìë™í™”ëœ íŒŒì´í”„ë¼ì¸ êµ¬ì¶•.
    *   Human-in-the-loop(ê´€ë¦¬ì í”¼ë“œë°±)ì„ í†µí•´ ì§€ì†ì ìœ¼ë¡œ ê³ ë„í™”ë˜ëŠ” ì—ì´ì „íŠ¸ ê°œë°œ.
*   **Success Metrics (ì„±ê³µ ì§€í‘œ):**
    *   ì¼ì¼ ì „ëµ ìˆ˜ë¦½ ì†Œìš” ì‹œê°„ 90% ë‹¨ì¶• (ê¸°ì¡´ 30ë¶„ $\rightarrow$ 3ë¶„).
    *   SV í”¼ë“œë°± 'ì±„íƒ/ìˆ˜ì •' ë¹„ìœ¨ 80% ì´ìƒ ë‹¬ì„± (ì´ˆê¸° ì•ˆì •í™” ì´í›„).

---

## 2. í•µì‹¬ ê¸°ëŠ¥ ë° ìƒì„¸ ìš”ê±´ (Functional Requirements)

### 2.1. ë°ì´í„° ìˆ˜ì§‘ ë° ë¬´ê²°ì„± ê²€ì¦ (Data Ingestion & Strict Validation)
> **PM Note:** í• ë£¨ì‹œë„¤ì´ì…˜ ë°©ì§€ë¥¼ ìœ„í•´ LLMì´ ì•„ë‹Œ **Code Levelì˜ ê²€ì¦**ì„ ìµœìš°ì„ ìœ¼ë¡œ í•¨.

*   **ì…ë ¥ ë°©ì‹:** ê´€ë¦¬ìê°€ êµ¬ê¸€ ìŠ¤í”„ë ˆë“œì‹œíŠ¸ì— ì „ì¼ì ë°ì´í„°ë¥¼ ìˆ˜ë™ ì…ë ¥ (ì§€ì •ëœ í…œí”Œë¦¿ ì‚¬ìš©).
*   **ê¸°ëŠ¥ ìš”ê±´:**
    *   **Pydantic**ì„ í™œìš©í•œ ë°ì´í„° ìŠ¤í‚¤ë§ˆ ê²€ì¦ (Strict Mode).
    *   í•„ìˆ˜ ì»¬ëŸ¼(`ì‘ëŒ€ìœ¨`, `í¬ê¸°í˜¸`, `AHT`, `ì¶œê·¼ì¸ì›` ë“±) ëˆ„ë½ ì‹œ ì—ëŸ¬ ë°œìƒ.
    *   ë°ì´í„° íƒ€ì…(Type) ë° ë²”ìœ„(Range) ê²€ì‚¬ (ì˜ˆ: ì‘ëŒ€ìœ¨ì€ 0~100 ì‚¬ì´, ìŒìˆ˜ ë¶ˆê°€).
*   **ì˜ˆì™¸ ì²˜ë¦¬:** ê²€ì¦ ì‹¤íŒ¨ ì‹œ Slackìœ¼ë¡œ ì¦‰ì‹œ ì•Œë¦¼ ("ë°ì´í„° í˜•ì‹ ì˜¤ë¥˜: Cì—´ ìˆ«ìë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”") í›„ í”„ë¡œì„¸ìŠ¤ ì¤‘ë‹¨.

### 2.2. ì „ëµ ìˆ˜ë¦½ ë° ì¶”ë¡  (Reasoning & Strategy Generation)
> **Arch Note:** LangGraphë¥¼ í™œìš©í•œ ì›Œí¬í”Œë¡œìš° ì œì–´.

*   **Workflow Node:**
    1.  **Analyze Node:** ì „ì¼ì SLA ì‹¤íŒ¨/ì„±ê³µ ì›ì¸ ë¶„ì„ (íŠ¸ë˜í”½ ê³¼ë¶€í•˜ vs ì¸ë ¥ ë¶€ì¡± ë“±).
    2.  **Retrieve Node (Optional):** ê³¼ê±° ìœ ì‚¬ íŒ¨í„´(ìš”ì¼, í”„ë¡œëª¨ì…˜ ì‹œì¦Œ) ê²€ìƒ‰.
    3.  **Draft Node:** ê¸ˆì¼ ìš´ì˜ ì „ëµ ì´ˆì•ˆ ìƒì„± (ì‹œê°„ëŒ€ë³„ ì¸ì› ë°°ì¹˜, ì ì‹¬ì‹œê°„ ì¡°ì • ë“± Action Item ë„ì¶œ).
*   **System Prompt:** ë² í…Œë‘ ì„¼í„°ì¥ í˜ë¥´ì†Œë‚˜ ì ìš©. ì¶”ìƒì  ì¡°ì–¸ ë°°ì œí•˜ê³  êµ¬ì²´ì  ìˆ˜ì¹˜ ì œì‹œ.

### 2.3. í’ˆì§ˆ í‰ê°€ (LLM-as-a-Judge)
> **Arch Note:** ì‚¬ìš©ìì—ê²Œ ë„ë‹¬í•˜ê¸° ì „ ë‚´ë¶€ì  í’ˆì§ˆ ë³´ì¦(QA) ë‹¨ê³„.

*   **ê¸°ëŠ¥ ìš”ê±´:** Draft Nodeê°€ ìƒì„±í•œ ì „ëµì„ ë³„ë„ì˜ Judge LLMì´ í‰ê°€.
*   **í‰ê°€ ê¸°ì¤€:**
    *   ë…¼ë¦¬ì  íƒ€ë‹¹ì„± (ì›ì¸ê³¼ í•´ê²°ì±…ì´ ì—°ê²°ë˜ëŠ”ê°€?)
    *   ì‹¤í˜„ ê°€ëŠ¥ì„± (í˜„ì¬ ê°€ìš© ì¸ì›ìœ¼ë¡œ ê°€ëŠ¥í•œê°€?)
    *   êµ¬ì²´ì„± (ìˆ˜ì¹˜ê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ê°€?)
*   **Pass/Fail:** ê¸°ì¤€ ì ìˆ˜ ë¯¸ë‹¬ ì‹œ Draft Nodeë¡œ í”¼ë“œë°±ì„ ì£¼ì–´ ì¬ìƒì„± ìš”ì²­(Retry Loop).

### 2.4. ë°°í¬ ë° í”¼ë“œë°± (Slack Interface & Human-in-the-loop)
> **PM Note:** ì‚¬ìš©ìê°€ ê°€ì¥ ë§ì´ ì ‘í•˜ëŠ” í™”ë©´. ìƒí˜¸ì‘ìš©ì´ í•µì‹¬.

*   **UI êµ¬ì„± (Block Kit):**
    *   **Section 1:** ì–´ì œ í˜„í™© ìš”ì•½ (í•µì‹¬ ì§€í‘œ).
    *   **Section 2:** [AI ì¶”ì²œ ì „ëµ] ë¦¬ìŠ¤íŠ¸.
    *   **Section 3 Action Button:** `ğŸ‘ ì±„íƒ(ë°°í¬)`, `âœï¸ ìˆ˜ì • ìš”ì²­`, `ğŸ‘ ê¸°ê°`.
*   **ìƒí˜¸ì‘ìš©:**
    *   `ìˆ˜ì • ìš”ì²­` í´ë¦­ ì‹œ Modal ì°½ í˜¸ì¶œ $\rightarrow$ SVê°€ ìˆ˜ì • ì‚¬ìœ (Context) ì…ë ¥ $\rightarrow$ AIê°€ ì „ëµ ìˆ˜ì • í›„ ì¬ì œì•ˆ.
    *   í”¼ë“œë°± ë°ì´í„°ëŠ” Langfuseì— ê¸°ë¡í•˜ì—¬ í”„ë¡¬í”„íŠ¸ ê°œì„  ë°ì´í„°ë¡œ í™œìš©.

---

## 3. ë°ì´í„° ì•„í‚¤í…ì²˜ (Data Strategy)

### 3.1. Google Sheet Template (Schema)
*   **ì…ë ¥ ì‹œíŠ¸:** ì‚¬ëŒì´ ì…ë ¥í•˜ì§€ë§Œ DBì²˜ëŸ¼ í™œìš©í•˜ê¸° ìœ„í•´ ì—„ê²©í•œ ì»¬ëŸ¼ ì •ì˜.
    *   `date` (YYYY-MM-DD)
    *   `total_calls` (Integer)
    *   `answered_calls` (Integer)
    *   `service_level` (Float, 0.0~1.0)
    *   `staff_count` (Integer)
    *   `special_event` (String/Nullable) - ì˜ˆ: "ì‹œìŠ¤í…œ ì ê²€", "í”„ë¡œëª¨ì…˜"

### 3.2. Feedback Logging (Langfuse)
*   Traceì— í¬í•¨ë  ë©”íƒ€ë°ì´í„°: `model_version`, `input_tokens`, `output_tokens`, `user_feedback_score`, `feedback_comment`.

---

## 4. ê¸°ìˆ  ìŠ¤íƒ (Tech Stack)

| êµ¬ë¶„ | ê¸°ìˆ  | ì„ ì • ì´ìœ  |
| :--- | :--- | :--- |
| **Framework** | **LangGraph** | ìˆœí™˜(Loop) êµ¬ì¡°ì™€ ìƒíƒœ ê´€ë¦¬(State Management)ë¥¼ ìœ„í•´ í•„ìˆ˜. |
| **LLM** | **OpenAI GPT-5-mini** | ë³µì¡í•œ ì¶”ë¡ (Reasoning)ê³¼ Judge ì—­í•  ìˆ˜í–‰ì— ì í•©. |
| **Validation** | **Pydantic** | ëŸ°íƒ€ì„ ë°ì´í„° ê²€ì¦ ë° Type Safety ë³´ì¥. |
| **Observability** | **Langfuse** | LLM ì…ì¶œë ¥ ë¡œê¹…, ë¹„ìš© ì¶”ì , ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘. |
| **Interface** | **Slack Bolt SDK** | ì ‘ê·¼ì„±ì´ ê°€ì¥ ë†’ì€ ì‚¬ë‚´ ë©”ì‹ ì € í™œìš©. |
| **Database** | **Google Sheets** | (MVP) ì´ˆê¸° ë¹„ìš© 0, í˜„ì—… ì¹œìˆ™ë„ ìµœìƒ, API ì—°ë™ ìš©ì´. |

---

## 5. ì œì•½ ì‚¬í•­ ë° ë¦¬ìŠ¤í¬ (Constraints & Risks)
*   **êµ¬ê¸€ ì‹œíŠ¸ API Rate Limit:** ìš”ì²­ëŸ‰ì´ ë§ì•„ì§ˆ ê²½ìš° API ì œí•œì´ ê±¸ë¦´ ìˆ˜ ìˆìŒ $\rightarrow$ ë°°ì¹˜ ì²˜ë¦¬ë¡œ ìµœì†Œí™”.
*   **ë³´ì•ˆ:** êµ¬ê¸€ ì‹œíŠ¸ ì ‘ê·¼ ê¶Œí•œ ê´€ë¦¬ í•„ìš” (Service Account Key ê´€ë¦¬ ì² ì €).

---
